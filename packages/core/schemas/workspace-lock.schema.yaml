$schema: "https://json-schema.org/draft/2020-12/schema"
$id: "https://sniper.ai/schemas/workspace-lock"
title: Workspace File Lock
description: Schema for advisory file locks in SNIPER workspace coordination.
type: object
required:
  - file
  - locked_by
  - since
properties:
  file:
    type: string
    description: Relative file path being locked.
  locked_by:
    type: object
    required: [project, agent, protocol]
    properties:
      project:
        type: string
        description: Project name that holds the lock.
      agent:
        type: string
        description: Agent that acquired the lock.
      protocol:
        type: string
        description: Protocol execution that holds the lock.
  since:
    type: string
    format: date-time
    description: When the lock was acquired.
  reason:
    type: string
    description: Why the lock was acquired.
additionalProperties: false
