name: refactor-analyze
description: Refactor analysis phase quality gate â€” verifies analysis artifacts

checks:
  - id: analysis_produced
    description: Refactoring analysis spec exists
    check: file:docs/spec.md
    blocking: true

  - id: refactor_targets_identified
    description: Analysis identifies specific refactoring targets
    check: grep:docs/spec.md:"## "
    blocking: false

  - id: analysis_nonempty
    description: Analysis is not a stub (at least 20 lines)
    command: "test $(wc -l < docs/spec.md) -ge 20"
    blocking: false
